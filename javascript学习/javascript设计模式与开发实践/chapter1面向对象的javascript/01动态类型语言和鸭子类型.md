##1.1动态类型语言和鸭子类型

####动态类型语言







####鸭子类型

> 鸭子类型的概念，通俗的说法是：“如果它走起路来像鸭子，叫起来也像鸭子，那么它就是鸭子。”

>从前在JavaScript王国里，有一个国王，他觉得世界上最美妙的声音就是鸭子的叫声，于是国王召集大臣，要组建一个1000只鸭子的合唱团。大家最终只找到了999只鸭子，最后大家发现有一只非常特别的鸡，它的叫声跟鸭子一模一样，于是这只鸡就成为了合唱团的最后一员。

> 上述这个故事告诉我们，国王要听的只是鸭子的叫声，这个声音的主人到底是鸭子还是鸡并不重要，鸭子类型指导我们**只关住对象的行为，而不是关住对象本身**，也就是关住HAS-A，而不是IS-A。

```javascript
    var duck = {
      duckSinging : function(){
        console.log('嘎嘎嘎');
      }
    }
    var chicken = {
      duckSinging : function(){
        console.log('嘎嘎嘎');
      }
    }
    var choir = [];

    var joinChoir = function(animal){
      if(animal && (typeof animal.duckSinging === 'function')){
        choir.push(animal);
        console.log('恭喜加入合唱团');
        console.log('合唱团已有成员数量:'+ choir.length);
      } 
    }

    joinChoir(duck);
        //恭喜加入合唱团，
        //合唱团已有成员数量:1
    joinChoir(chicken);
        //恭喜加入合唱团，
        //合唱团已有成员数量:2
```

> 对于加入合唱团的动物，大臣根本无需检查他们的类型，而是只需要保证他们拥有duckSinging方法，如果下次期望计入合唱团的是一只小狗，而这只小狗刚好也会鸭子叫，我相信这只小狗也能够顺利加入。

###

>在动态类型语言的面向对象设计中，鸭子类型的概念至关重要。利用鸭子类型的思想，我们不必借助超类型的帮助，就能轻松地在动态类型语言中实现一个原则：“卖相借口编程，而不是面向实现编程”。例如，一个对象若有push和pop方法，并且这些方法提供了正确的实现，他就可以被当作栈来使用。一个对象如果有length属性，也可以依照下标来存取属性(最好还要拥有slice和splice等方法)，这个对象就可以被当作数组来使用。

> 在静态类型语言中，要实现“面向接口编程”并不是一件容易的事情，往往要通过抽象类或者接口等将对象进行向上转型。当对象的真正类型被隐藏在它的超类型身后，这些对象才能在类型检测系统的“监视”之下互相被替换使用。只有当对象能够被互相替换使用，才能体现出对象多态性的价值。

> “面向接口编程”是设计模式中最重要的思想。但在JavaScript语言中，“面向接口编程”的过程跟主流的静态类型语言不一样。













